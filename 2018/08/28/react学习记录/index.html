<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0"> 
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="React学习记录（基础复习）">




  <meta name="keywords" content="前端开发，阴阳师，云之遏，阿嘤嘤嘤酱">










  <link rel="alternate" href="/fountainpomelo.github.io/default" title="荒地">




  <link rel="shortcut icon" type="image/x-icon" href="/fountainpomelo.github.io/favicon.ico?v=2.10.1">



<link rel="canonical" href="http://fountainyys.cn/2018/08/28/react学习记录/">



  <link rel="stylesheet" type="text/css" href="/fountainpomelo.github.io/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/fountainpomelo.github.io/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/fountainpomelo.github.io/css/style.css?v=2.10.1">



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> React学习记录（基础复习） - 荒地 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/fountainpomelo.github.io/." class="logo">荒地</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/fountainpomelo.github.io/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/fountainpomelo.github.io/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/fountainpomelo.github.io/tags/">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/fountainpomelo.github.io/about">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>
    



    <div class="container" id="mobile-panel">





      <header id="header" class="header">
       <div><div class="logo-wrapper">
  <a href="/fountainpomelo.github.io/." class="logo">荒地</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/fountainpomelo.github.io/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/fountainpomelo.github.io/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/fountainpomelo.github.io/tags/">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/fountainpomelo.github.io/about">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>
</div>
      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          React学习记录（基础复习）
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          8月 28
        </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#资料"><span class="toc-text">资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React开发思维"><span class="toc-text">React开发思维</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-router-v4"><span class="toc-text">React-router v4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Routers"><span class="toc-text">Routers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Route-Matching"><span class="toc-text">Route Matching</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Route-Rendering-Props"><span class="toc-text">Route Rendering Props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Navigation"><span class="toc-text">Navigation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环-渲染列表和组件"><span class="toc-text">循环 渲染列表和组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#className"><span class="toc-text">className</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多个类名"><span class="toc-text">多个类名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态类名"><span class="toc-text">动态类名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态类名库classnames"><span class="toc-text">动态类名库classnames</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件渲染-ifelse"><span class="toc-text">条件渲染 ifelse</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#🌰根据用户是否登录来显示不同组件"><span class="toc-text">🌰根据用户是否登录来显示不同组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期"><span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建组件-父子组件传参"><span class="toc-text">创建组件(父子组件传参)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#constructor-NaN"><span class="toc-text">constructor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defaultProps"><span class="toc-text">defaultProps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#propTypes"><span class="toc-text">propTypes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setState"><span class="toc-text">setState</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#表单、实现双向绑定"><span class="toc-text">表单、实现双向绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#antDesign表单、属性校验"><span class="toc-text">antDesign表单、属性校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redux"><span class="toc-text">Redux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#就酱吧"><span class="toc-text">就酱吧</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><ul>
<li><a href="https://reactjs.org/docs/hello-world.html" target="_blank" rel="noopener">react官方网站</a></li>
<li><a href="https://react.docschina.org/" target="_blank" rel="noopener">react中文文档</a></li>
<li><a href="https://reacttraining.com/react-router/web/guides/basic-components" target="_blank" rel="noopener">react-router官网</a></li>
<li><a href="http://cn.redux.js.org/" target="_blank" rel="noopener">redux</a></li>
</ul>
<p>我在公司使用频率最高的框架还是非常容易上手的<code>Vue</code>，我翻到了去年匆匆忙忙学习<code>React</code>时做过的小<code>demo</code>，里面不整齐地掺了各种小例子，主要是<code>React</code>的基本运用，还有最实际的若与后台交互获取到数据后到页面的渲染，结合<code>ant-ui</code>等<code>UI</code>小助手，会发现<code>React</code>其实特别有意思，接下来，跟着我的胡言乱语了解一下<code>React</code>8⃣️。<br><a id="more"></a><br>部分资料为摘录。</p>
<h2 id="React开发思维"><a href="#React开发思维" class="headerlink" title="React开发思维"></a>React开发思维</h2><p>“组件”这个词，在这几年我觉得听烂了。在我们对<code>React</code>的理解里，首先是封装起来的具有独立功用的<code>UI</code>部件，由于用<code>jQuery</code>去(复杂地)操作的<code>DOM</code>元素，后期代码会变得越来越难维护，相信如果你需要去维护别人写的<code>jq</code>项目，你明白我在说什么，怎么进行高功用的杂乱<code>DOM</code>操作通常是衡量一个前端开发人员技能的重要目标。</p>
<p><code>React</code>为此引入了虚拟<code>DOM（Virtual DOM）</code>的机制：在浏览器端用<code>Javascript</code>完结了一套<code>DOM API</code>。依据<code>React</code>进行开发时一切的<code>DOM</code>结构都是经过虚拟<code>DOM</code>进行，每逢数据改动时，<code>React</code>都会从头构建全部<code>DOM</code>树，然后<code>React</code>将当时全部<code>DOM</code>树和上一次的<code>DOM</code>树进行比照，得到<code>DOM</code>结构的差异，然后仅仅将需求改动的有些进行实践的浏览器<code>DOM</code>更新。</p>
<p>并且<code>React</code>能够批处理虚拟<code>DOM</code>的改写，在一个事件循环<code>（Event Loop）</code>内的两次数据改动会被兼并，例如你连续的先将节点内容从A成为B，然后又从B成为A，<code>React</code>会以为<code>UI</code>不发生任何改动，而假如经过手动操控，这种逻辑通常是极端杂乱的。尽管每一次都需求结构完好的虚拟<code>DOM</code>树，可是由于虚拟<code>DOM</code>是内存数据，功用是极高的，而对实践<code>DOM</code>进行操作的仅仅是<code>Diff</code>有些，因而能到达提高功用的目的。这么，在确保功用的一同，开发者将不再需求重视某个数据的改动怎么更新到一个或多个具体的<code>DOM</code>元素，而只需求关怀在任意一个数据状况下，全部界面是怎么<code>Render</code>的。</p>
<h2 id="React-router-v4"><a href="#React-router-v4" class="headerlink" title="React-router v4"></a>React-router v4</h2><p><code>&quot;react-router-dom&quot;: &quot;^4.3.1&quot;</code></p>
<h3 id="Routers"><a href="#Routers" class="headerlink" title="Routers"></a>Routers</h3><ul>
<li><p><code>&lt;BrowserRouter&gt;</code><br>  通过<code>HTML5</code>的<code>history</code> <code>API</code>来改变<code>URL</code>，并与服务器配合实现的路由切换的<br>🌰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render((</span><br><span class="line">    &lt;BrowserRouter&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;/BrowserRouter&gt;</span><br><span class="line">), document.getElementById(&apos;root&apos;));</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;HashRouter&gt;</code><br>如果您使用的是静态资源服务器，将更推荐这种</p>
</li>
</ul>
<h3 id="Route-Matching"><a href="#Route-Matching" class="headerlink" title="Route Matching"></a>Route Matching</h3><ul>
<li><p><code>&lt;Route&gt;</code><br>  没有路径<code>path</code>的<code>&lt;Route&gt;</code>将总是被匹配（呈现）<br>🌰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Route, Switch &#125; from &quot;react-router-dom&quot;; //import路由</span><br><span class="line"></span><br><span class="line">// when location = &#123; pathname: &apos;/about&apos; &#125;</span><br><span class="line"></span><br><span class="line">&lt;Route path=&apos;/about&apos; component=&#123;About&#125;/&gt;     // renders &lt;About/&gt;</span><br><span class="line">&lt;Route path=&apos;/contact&apos; component=&#123;Contact&#125;/&gt; // renders null</span><br><span class="line"></span><br><span class="line">&lt;Route component=&#123;Always&#125;/&gt;                  // renders &lt;Always/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;Switch&gt;</code><br>  将迭代其所有子元素<code>&lt;route&gt;</code>并且只渲染与当前位置匹配的第一个元素<br>  您可以在路由之间设置转换动画以及标识没有路由匹配时可呈现“404”组件<br>🌰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route exact path=&quot;/&quot; component=&#123;Home&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/about&quot; component=&#123;About&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/contact&quot; component=&#123;Contact&#125; /&gt;</span><br><span class="line"></span><br><span class="line">  &#123;/* 当没有路由被匹配时, &lt;NoMatch&gt; 组件将被渲染 */&#125;</span><br><span class="line">  &lt;Route component=&#123;NoMatch&#125; /&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Route-Rendering-Props"><a href="#Route-Rendering-Props" class="headerlink" title="Route Rendering Props"></a>Route Rendering Props</h3><ul>
<li><code>component</code></li>
<li><p><code>render</code><br>在路由匹配到的时候，可以传入一个函数代替使用组件属性为您创建一个新的<code>react</code>元素，<code>render</code> 和 <code>component</code> 不能同时使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// convenient inline rendering</span><br><span class="line">&lt;Route path=&quot;/home&quot; render=&#123;() =&gt; &lt;div&gt;Home&lt;/div&gt;&#125;/&gt;</span><br><span class="line"></span><br><span class="line">// wrapping/composing</span><br><span class="line">const FadingRoute = (&#123; component: Component, ...rest &#125;) =&gt; (</span><br><span class="line">  &lt;Route &#123;...rest&#125; render=&#123;props =&gt; (</span><br><span class="line">    &lt;FadeIn&gt;</span><br><span class="line">      &lt;Component &#123;...props&#125;/&gt;</span><br><span class="line">    &lt;/FadeIn&gt;</span><br><span class="line">  )&#125;/&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&lt;FadingRoute path=&quot;/cool&quot; component=&#123;Something&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>children</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;ListItemLink to=&quot;/somewhere&quot; /&gt;</span><br><span class="line">  &lt;ListItemLink to=&quot;/somewhere-else&quot; /&gt;</span><br><span class="line">&lt;/ul&gt;;</span><br><span class="line"></span><br><span class="line">const ListItemLink = (&#123; to, ...rest &#125;) =&gt; (</span><br><span class="line">  &lt;Route</span><br><span class="line">    path=&#123;to&#125;</span><br><span class="line">    children=&#123;(&#123; match &#125;) =&gt; (</span><br><span class="line">      &lt;li className=&#123;match ? &quot;active&quot; : &quot;&quot;&#125;&gt;</span><br><span class="line">        &lt;Link to=&#123;to&#125; &#123;...rest&#125; /&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">);</span><br><span class="line">&lt;Route children=&#123;(&#123; match, ...rest &#125;) =&gt; (</span><br><span class="line">  &#123;/* Animate will always render, so you can use lifecycles</span><br><span class="line">      to animate its child in and out */&#125;</span><br><span class="line">  &lt;Animate&gt;</span><br><span class="line">    &#123;match &amp;&amp; &lt;Something &#123;...rest&#125;/&gt;&#125;</span><br><span class="line">  &lt;/Animate&gt;</span><br><span class="line">)&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h3><ul>
<li><p><code>&lt;Link&gt;</code><br>将创建一个<code>a</code>标签</p>
</li>
<li><p><code>&lt;NavLink&gt;</code><br>是<code>&lt;Link&gt;</code>的特殊形式，可以给它一个<code>activeStyle</code>(样式)</p>
</li>
</ul>
<ul>
<li><code>&lt;Redirect&gt;</code><br>新位置将覆盖浏览器历史堆栈中的当前位置<code>&lt;Redirect to=&quot;/somewhere/else&quot; /&gt;</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Route, Redirect &#125; from &apos;react-router&apos;</span><br><span class="line"></span><br><span class="line">&lt;Route exact path=&quot;/&quot; render=&#123;() =&gt; (</span><br><span class="line">loggedIn ? (</span><br><span class="line">&lt;Redirect   </span><br><span class="line">    to=&#123;&#123;</span><br><span class="line">        pathname: &quot;/login&quot;,</span><br><span class="line">        search: &quot;?utm=your+face&quot;,</span><br><span class="line">        state: &#123; referrer: currentLocation &#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">) : (</span><br><span class="line">&lt;PublicHomePage/&gt;</span><br><span class="line">)</span><br><span class="line">)&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>了解这么多，我首先想要实现的功能是导航组件只引用一次，内容部分路由切换，类似 <code>vue</code> 留坑实现路由嵌套这样的功能。</p>
<p>想要实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;MainMenu&gt;&lt;/MainMenu&gt;</span><br><span class="line">    // 变化的部分</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>利用 <code>Route</code> 的 <code>children</code>属性，把这些变化的部分写成 <code>props.childern</code> 就可以实现。</p>
<h2 id="循环-渲染列表和组件"><a href="#循环-渲染列表和组件" class="headerlink" title="循环 渲染列表和组件"></a>循环 渲染列表和组件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const menus = [</span><br><span class="line">  &#123; key: &apos;1&apos;, url: &apos;/about&apos;, name: &apos;about&apos; &#125;,</span><br><span class="line">  &#123; key: &apos;2&apos;, url: &apos;/tag&apos;, name: &apos;tag&apos; &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">&#123; menus.map((item, i) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;Menu.Item key=&#123;i&#125;&gt;</span><br><span class="line">      &lt;Icon type=&quot;user&quot; /&gt;</span><br><span class="line">      &lt;Link to=&#123;item.url&#125; &gt; &#123; item.name &#125; &lt;/Link&gt;</span><br><span class="line">    &lt;/Menu.Item&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;)&#125;</span><br></pre></td></tr></table></figure>
<h2 id="className"><a href="#className" class="headerlink" title="className"></a>className</h2><h3 id="多个类名"><a href="#多个类名" class="headerlink" title="多个类名"></a>多个类名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123; `$&#123;this.state.a&#125; $&#123;this.state.b&#125;` &#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="动态类名"><a href="#动态类名" class="headerlink" title="动态类名"></a>动态类名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123;index === this.state.active ? &quot;active&quot; : null&#125;&gt;标题&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="动态类名库classnames"><a href="#动态类名库classnames" class="headerlink" title="动态类名库classnames"></a>动态类名库<code>classnames</code></h3><ul>
<li>使用  <code>npm i classnames</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">classNames(&apos;foo&apos;, &apos;bar&apos;); // =&gt; &apos;foo bar&apos;</span><br><span class="line">classNames(&apos;foo&apos;, &#123; bar: true &#125;); // =&gt; &apos;foo bar&apos;</span><br><span class="line">classNames(&#123; &apos;foo-bar&apos;: true &#125;); // =&gt; &apos;foo-bar&apos;</span><br><span class="line">classNames(&#123; &apos;foo-bar&apos;: false &#125;); // =&gt; &apos;&apos;</span><br><span class="line">classNames(&#123; foo: true &#125;, &#123; bar: true &#125;); // =&gt; &apos;foo bar&apos;</span><br><span class="line">classNames(&#123; foo: true, bar: true &#125;); // =&gt; &apos;foo bar&apos;</span><br><span class="line"></span><br><span class="line">// lots of arguments of various types</span><br><span class="line">classNames(&apos;foo&apos;, &#123; bar: true, duck: false &#125;, &apos;baz&apos;, &#123; quux: true &#125;); // =&gt; &apos;foo bar baz quux&apos;</span><br><span class="line"></span><br><span class="line">// other falsy values are just ignored</span><br><span class="line">classNames(null, false, &apos;bar&apos;, undefined, 0, 1, &#123; baz: null &#125;, &apos;&apos;); // =&gt; &apos;bar 1&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="条件渲染-ifelse"><a href="#条件渲染-ifelse" class="headerlink" title="条件渲染 ifelse"></a>条件渲染 ifelse</h2><p>可以三元直接判断<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;</span><br><span class="line">    this.state.overType == 1 ?</span><br><span class="line">      (</span><br><span class="line">        &lt;span &gt;停止&lt;/span&gt;</span><br><span class="line">      ) </span><br><span class="line">        :</span><br><span class="line">      (</span><br><span class="line">        &lt;span &gt;开始&lt;/span&gt;</span><br><span class="line">      )</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>但在<code>jsx</code>中是不允许<code>if</code>条件判断，可以通过函数方法写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">template()&#123;</span><br><span class="line">  if(this.state.overType == 1 )&#123;</span><br><span class="line">    return &lt;span &gt;停止&lt;/span&gt;</span><br><span class="line">  &#125;else if(this.state.overType == 2)&#123;</span><br><span class="line">    return &lt;span &gt;开始&lt;/span&gt;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    return &lt;span &gt;出错啦&lt;/span&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;tags&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">      &#123; this.template() &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/div &gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="🌰根据用户是否登录来显示不同组件"><a href="#🌰根据用户是否登录来显示不同组件" class="headerlink" title="🌰根据用户是否登录来显示不同组件"></a>🌰根据用户是否登录来显示不同组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Greeting(props) &#123;</span><br><span class="line"></span><br><span class="line">  const isLoggedIn = props.isLoggedIn; </span><br><span class="line"></span><br><span class="line">  if (isLoggedIn) &#123;  </span><br><span class="line">    return &lt;UserGreeting /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">  return &lt;GuestGreeting /&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Greeting isLoggedIn=&#123;false&#125; /&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><img src="/fountainpomelo.github.io/2018/08/28/react学习记录/state-and-lifecycle.webp"></p>
<h2 id="创建组件-父子组件传参"><a href="#创建组件-父子组件传参" class="headerlink" title="创建组件(父子组件传参)"></a>创建组件(父子组件传参)</h2><p>*以下均为<code>es6</code>写法，如欲对比<code>es5</code>写法不同之处，推荐阅读<a href="https://www.cnblogs.com/wonyun/p/5930333.html" target="_blank" rel="noopener">这篇文章</a>和<a href="https://medium.com/@kingzs70/%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9-react-createclass-es6-classes-%E6%97%A0%E7%8A%B6%E6%80%81%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6-52f07dd70e75" target="_blank" rel="noopener">这篇文章</a>，查看典型案例推荐<a href="https://react.docschina.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">制作时钟官方案例</a></p>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">constructor(props) &#123;         </span><br><span class="line">  super(props);            </span><br><span class="line">  this.state = &#123;count: props.initialCount&#125;;</span><br><span class="line">  this.handleClick = this.handleClick.bind(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>super</code>关键字，它指代父类的实例，继承父类的<code>this</code>对象，然后对其进行加工。如果不调用<code>super</code>方法，子类就得不到<code>this</code>对象。</p>
<p>组件的<code>props</code>是父组件通过调用子组件向子组件传递的，子组件内部不应该对<code>props</code>进行修改，它更像是所有子组件实例共享的状态，不会因为子组件内部操作而改变。</p>
<h3 id="defaultProps"><a href="#defaultProps" class="headerlink" title="defaultProps"></a>defaultProps</h3><p>定义默认<code>props</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static defaultProps = &#123;   //类的静态属性</span><br><span class="line">  name: &apos;demo&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="propTypes"><a href="#propTypes" class="headerlink" title="propTypes"></a>propTypes</h3><p>在开发模式下，可以通过类型检查捕获大量错误，PropTypes 包含一整套验证器，可用于确保你接收的数据是有效的。详细见<a href="https://react.docschina.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">文档</a>。<br>出于性能原因，<code>propTypes</code> 只在开发模式下进行检查。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Snoopy.propTypes = &#123;</span><br><span class="line">  name: React.PropTypes.string</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      posts: [],</span><br><span class="line">      comments: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// 可独立更新</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">    fetchPosts().then(response =&gt; &#123;</span><br><span class="line">      this.setState(&#123;</span><br><span class="line">        posts: response.posts</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  fetchComments().then(response =&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      comments: response.comments</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>浅合并，换也就是说<code>this.setState({comments})</code>完整保留了<code>this.state.posts</code>，但完全替了<code>this.state.comments</code>。</p>
<h2 id="表单、实现双向绑定"><a href="#表单、实现双向绑定" class="headerlink" title="表单、实现双向绑定"></a>表单、实现双向绑定</h2><p>你现在用自己的<code>iput</code>小组件与<code>state</code>数据绑定，想要将表单数据自动形成一个对象以便传参，发现<code>input</code>内容怎么都输入不进去。<br>首先想到的是数据双向绑定，但<code>react</code>只是单向数据流（自上而下），想要双向就得自己写啦。</p>
<p>将多个 <code>setState()</code> 调用合并成一个调用来提高性能。</p>
<p>给<code>input</code>定义好<code>name</code>，方便<code>setState</code>对应的值哦。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    Name:</span><br><span class="line">      &lt;input type=&quot;text&quot; name=&quot;input2&quot; value=&#123;this.state.input2&#125; onChange=&#123;this.handleChange&#125; /&gt;</span><br><span class="line">  &lt;/label&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    留言: &lt;textarea value=&#123;this.state.textarea&#125; name=&apos;textarea&apos; onChange=&#123;this.handleChange&#125; /&gt;</span><br><span class="line">  &lt;/label&gt;</span><br><span class="line">  &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后通过<code>event</code>可以获取到目标信息，动态更改表单数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">handleChange(event) &#123;</span><br><span class="line">  const target = event.target;</span><br><span class="line">  const value = target.type === &apos;checkbox&apos; ? target.checked : target.value;</span><br><span class="line">  const name = target.name;</span><br><span class="line"></span><br><span class="line">  this.setState(&#123;</span><br><span class="line">    [name]: value</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="antDesign表单、属性校验"><a href="#antDesign表单、属性校验" class="headerlink" title="antDesign表单、属性校验"></a>antDesign表单、属性校验</h2><p>在使用<code>ant-ui</code>表单照搬例子的时候，发现了<code>getFieldDecorator</code>这个东西，写上之后会报<code>Cannot read property &#39;getFieldDecorator&#39; of undefined</code>，解决办法：</p>
<p>经 <code>Form.create()</code> 包装过的组件会自带 <code>this.props.form</code> 属性，所以需要包装一下<code>Tags</code>组件<code>Tags = Form.create({})(Tags);</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">export default class Tags extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; getFieldDecorator &#125; = this.props.form;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">          &lt;Form.Item</span><br><span class="line">            label=&quot;Note&quot;</span><br><span class="line">            labelCol=&#123;&#123; span: 5 &#125;&#125;</span><br><span class="line">            wrapperCol=&#123;&#123; span: 12 &#125;&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;getFieldDecorator(&apos;note&apos;, &#123;</span><br><span class="line">              initialValue: item.value, //绑定初始值</span><br><span class="line">              rules: [&#123; required: true, message: &apos;Please input your note!&apos; &#125;],</span><br><span class="line">            &#125;)(</span><br><span class="line">              &lt;Input /&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">          &lt;/Form.Item&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/div &gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Tags = Form.create(&#123;&#125;)(Tags);</span><br></pre></td></tr></table></figure>
<p>走这一步，你想要取得表单的数据传送给后台:</p>
<p> <code>this.props.form.validateFields((err, values) =&gt; {})</code></p>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p>就算英文再难以阅读，也要先知道几乎所有博客的教程，其实也是再加工而已，有些时候，不过直接看原版来的好。</p>
<p>看个视频，感受一下<code>redux</code>作者的声音吧，<a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="noopener">30集免费视频</a>在线收听。</p>
<h2 id="就酱吧"><a href="#就酱吧" class="headerlink" title="就酱吧"></a>就酱吧</h2><p>感谢</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="http://fountainyys.cn">fountainyys.cn</a>
    </p>
    <p class="copyright-item">
      <span>原文链接: </span>
      <a href="http://fountainyys.cn/2018/08/28/react学习记录/">http://fountainyys.cn/2018/08/28/react学习记录/</a>
    </p>

  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/fountainpomelo.github.io/tags/react/">react</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/fountainpomelo.github.io/2018/09/28/Vue单页面首屏加载慢/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Vue单页面首屏加载慢</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/fountainpomelo.github.io/2018/06/03/那些跨域问题/">
        <span class="next-text nav-default">那些跨域问题</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC80MTcwMy8xODI0OQ==">

      </div>  
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer"> 

  <div class="social-links">
    
      
        
          <a href="mailto:fountain_x@outlook.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://weibo.com/u/2874806624" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
    
      
        
          <a href="https://www.douban.com/people/114544231/?dt_dapp=1" class="iconfont icon-douban" title="douban"></a>
        
      
    
      
    
      
    
      
    


  </div>

 

<div class="copyright">
  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2019
   <span class="author">fountainyys.cn</span>
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">	&amp;</span>
  <span class="theme-info">
  
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  
   <script type="text/javascript">
	(function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
  </script>




    
  



  
  





  
    <script type="text/javascript" src="/fountainpomelo.github.io/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/fountainpomelo.github.io/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/fountainpomelo.github.io/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/fountainpomelo.github.io/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/fountainpomelo.github.io/lib/nprogress/nprogress.min.js"></script>
  


    <script src="http://cdn.bootcss.com/headroom/0.5.0/headroom.min.js"></script>
<script src="http://res2.wx.qq.com/open/js/jweixin-1.4.0.js "></script>
<script type="text/javascript" src="/fountainpomelo.github.io/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
